Compilation error: arms of an if-then-else expression must have the same type